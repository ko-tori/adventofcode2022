print((lambda m,c:([[(c[k-1].insert(0,c[j-1].pop(0)))for _ in range(i)]for i,j,k in m],''.join(i[0]for i in c))[1])(*(lambda f:([(lambda x:tuple(int(x[y])for y in range(1,6,2)))(i.split())for i in f[10:-1]],[[f[j][i]for j in range(8)if f[j][i]!=' ']for i in range(1, 34, 4)]))(open('5.txt').read().split('\n'))))
print((lambda m,c:([[(c[k-1].insert(0,c[j-1].pop(i-l-1)))for l in range(i)]for i,j,k in m],''.join(i[0]for i in c))[1])(*(lambda f:([(lambda x:tuple(int(x[y])for y in range(1,6,2)))(i.split())for i in f[10:-1]],[[f[j][i]for j in range(8)if f[j][i]!=' ']for i in range(1, 34, 4)]))(open('5.txt').read().split('\n'))))
